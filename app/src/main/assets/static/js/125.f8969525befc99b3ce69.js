webpackJsonp([125],{C565:function(t,e,n){var i=n("lpCg");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("05eaf346",i,!0,{})},lpCg:function(t,e,n){var i=n("kxFB");e=t.exports=n("FZ+f")(!1),e.push([t.i,"\n.pdb[data-v-47c3ed85] {\n  padding-bottom: 1.33333rem;\n}\n.medList[data-v-47c3ed85] {\n  background: #fff;\n  position: absolute;\n  width: 100%;\n  padding: 0 0.4rem;\n}\n.medList p[data-v-47c3ed85] {\n    height: 1.06667rem;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n            align-items: center;\n    border-bottom: 1px solid #ececec;\n}\n.title[data-v-47c3ed85] {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  height: 1.2rem;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n  -webkit-box-pack: justify;\n  -webkit-justify-content: space-between;\n          justify-content: space-between;\n  background: #fff;\n  padding-right: 0.4rem;\n}\n.title i[data-v-47c3ed85] {\n    display: block;\n    height: 0.46667rem;\n    width: 0.26667rem;\n    background: url("+i(n("P9/e"))+") no-repeat center;\n    background-size: cover;\n}\n.title .clear[data-v-47c3ed85] {\n    position: absolute;\n    height: 0.46667rem;\n    width: 0.46667rem;\n    background: url("+i(n("L5fL"))+") no-repeat center;\n    background-size: contain;\n    left: 6.93333rem;\n    top: 0.37333rem;\n}\n.title input[data-v-47c3ed85] {\n    width: 6.66667rem;\n    height: 70%;\n    background: #f4f4f4;\n    border-radius: 20px;\n    padding: 0 0.4rem 0 1.06667rem;\n}\n.title b[data-v-47c3ed85] {\n    display: block;\n    width: 0.53333rem;\n    height: 0.53333rem;\n    background: url("+i(n("wIlF"))+") no-repeat center;\n    position: absolute;\n    left: 1.46667rem;\n    top: 0.33333rem;\n}\n.title .sBtn[data-v-47c3ed85] {\n    min-width: 1.6rem;\n    min-height: 0.8rem;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n            align-items: center;\n    -webkit-box-pack: center;\n    -webkit-justify-content: center;\n            justify-content: center;\n    background: #306bce;\n    color: #fff;\n    border-radius: 10px;\n    margin-left: 0.26667rem;\n}\n.list[data-v-47c3ed85] {\n  margin-top: 0.13333rem;\n}\n.med[data-v-47c3ed85] {\n  background: #fff;\n  border-top: 1px solid #f3f3f3;\n}\n.info[data-v-47c3ed85] {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  padding: 0.26667rem 0.4rem;\n  -webkit-box-pack: justify;\n  -webkit-justify-content: space-between;\n          justify-content: space-between;\n}\n.info img[data-v-47c3ed85] {\n    width: 1.06667rem;\n    height: 1.06667rem;\n    border-radius: 5px;\n}\n.info div[data-v-47c3ed85] {\n    -webkit-box-flex: 1;\n    -webkit-flex: 1;\n            flex: 1;\n    margin: 0 0.4rem;\n    height: 100%;\n}\n.info div p[data-v-47c3ed85] {\n      padding-bottom: 0.06667rem;\n}\n.info div .gray[data-v-47c3ed85] {\n      font-size: 13px;\n}\n.info .price[data-v-47c3ed85] {\n    color: #ffa830;\n    font-weight: bold;\n    padding-top: 0.13333rem;\n}\n.info .operate[data-v-47c3ed85] {\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n    -webkit-flex-direction: column;\n            flex-direction: column;\n    -webkit-justify-content: space-around;\n            justify-content: space-around;\n    -webkit-box-align: end;\n    -webkit-align-items: flex-end;\n            align-items: flex-end;\n}\n.info .operate span[data-v-47c3ed85] {\n      text-align: right;\n      max-width: 2.66667rem;\n}\n.info .operate .topre[data-v-47c3ed85] {\n      font-size: 12px;\n      color: #306bce;\n      border: 1px solid #306bce;\n      border-radius: 10px;\n      padding: 0.06667rem 0.26667rem;\n}\n.info .operate .tousu[data-v-47c3ed85] {\n      font-size: 12px;\n      color: #fff;\n      background: #306bce;\n      border: 1px solid #306bce;\n      border-radius: 4px;\n      padding: 0.13333rem 0.26667rem;\n      width: -webkit-max-content;\n      width: max-content;\n}\n.info .operate .isusu[data-v-47c3ed85] {\n      color: #676767;\n      font-size: 13px;\n}\n.info .operate .delp[data-v-47c3ed85] {\n      font-size: 12px;\n      color: #ff2631;\n      border: 1px solid #ff2631;\n      border-radius: 10px;\n      padding: 0.06667rem 0.26667rem;\n}\n.info .operate .delup[data-v-47c3ed85] {\n      font-size: 12px;\n      color: #ff2631;\n      border: 1px solid #ff2631;\n      border-radius: 4px;\n      padding: 0.13333rem 0.26667rem;\n}\n.gray[data-v-47c3ed85] {\n  font-size: 12px;\n  color: #939393;\n}\n.bottomBack[data-v-47c3ed85] {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-pack: justify;\n  -webkit-justify-content: space-between;\n          justify-content: space-between;\n  height: 1.33333rem;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: #ececec;\n  padding-left: 2.13333rem;\n}\n.bottomBack .textBox[data-v-47c3ed85] {\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n    -webkit-flex-direction: column;\n            flex-direction: column;\n    -webkit-justify-content: space-around;\n            justify-content: space-around;\n    padding: 0.2rem 0;\n}\n.bottomBack .textBox p[data-v-47c3ed85] {\n      color: #ff2631;\n      font-size: 16px;\n}\n.bottomBack .textBox p[data-v-47c3ed85]:first-child {\n        color: #333;\n        font-size: 12px;\n}\n.bottomBack .butt[data-v-47c3ed85] {\n    display: block;\n    height: 100%;\n    width: 3.2rem;\n    line-height: 1.33333rem;\n    text-align: center;\n    color: #fff;\n    background: #306bce;\n    font-size: 16px;\n}\n.BackToPre[data-v-47c3ed85] {\n  width: 1.33333rem;\n  height: 1.33333rem;\n  position: absolute;\n  top: -0.33333rem;\n  left: 0.4rem;\n  background: url("+i(n("YBD0"))+") no-repeat center;\n  background-size: contain;\n}\n.BackToPre span[data-v-47c3ed85] {\n    position: absolute;\n    top: -0.13333rem;\n    right: -0.13333rem;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n            align-items: center;\n    -webkit-box-pack: center;\n    -webkit-justify-content: center;\n            justify-content: center;\n    width: 0.53333rem;\n    height: 0.53333rem;\n    background: #ff2631;\n    color: #fff;\n    border-radius: 50%;\n}\n",""])},qtFq:function(t,e,n){"use strict";function i(t){n("C565")}Object.defineProperty(e,"__esModule",{value:!0});var o=n("pKZN"),a=n("8pLc"),r=(o.a,a.a,{components:{back:o.a,noData:a.a},data:function(){return{search:this.$store.state.searchText,id:this.$route.query.id,list:[],Um:[],from:this.$route.query.from,page:1,size:15,haveMore:!0,user:this.$store.state.userInfo,ListDetails:this.$store.state.upList,showConfirm:!1,pageShow:!1,medSearchList:null,inputFlag:!1,prescriptionList:this.$store.state.prescriptionList,listArr:[]}},computed:{totalPrice:function(){var t=0;return this.ListDetails.length&&this.ListDetails.forEach(function(e){e.Quantity||(e.Quantity=1),t+=+e.Price*e.Quantity}),t.toFixed(2)}},created:function(){this.pull(!1)},mounted:function(){this.getMore()},beforeDestroy:function(){window.onscroll=null},methods:{searchFor:function(){this.search&&(this.medSearchList=null,this.page=1,this.haveMore=!0,this.id="",this.$store.dispatch("pushsearchText",this.search),this.pull(!1))},BackTo:function(){"ump"===this.$route.query.from||"upp"===this.$route.query.from?this.$router.go(-2):this.$router.go(-3)},pull:function(t){var e=this;this.haveMore&&(this.search&&(this.id=""),this.$post("Prescription/Medication/GetMedicationByNameForOftenUsed",this.$pick({MedicationName:this.search,OrgId:1,DoctorId:57,MedicationClassId:this.id,PageIndex:this.page,PageSize:this.size})).then(function(n){if(e.pageShow=!0,!n.ReturnData||n.ReturnData.length<15?e.haveMore=!1:e.haveMore=!0,"up"===e.from||"upp"===e.from){e.$store.state.upList.forEach(function(t){n.ReturnData.forEach(function(e){e.Id===t.Id&&(e.state="onUp")})})}else if("p"===e.from||"ump"===e.from){var i=e.$store.state.upList;i.forEach(function(t){n.ReturnData.forEach(function(e){e.Id===t.Id&&(e.state="onP")})})}t?n.ReturnData.forEach(function(t){e.list.push(t)}):e.list=n.ReturnData,e.$store.state.upList.length||e.list.forEach(function(t){t.state=""})}))},toUm:function(t,e){var n=this;this.$post("Prescription/Medication/SaveMedicationOftenUsed",{MedicationId:t.Id,MedicationCompanyId:t.MedicationCompanyId,OrgId:this.user.Data.User.OrgId,DoctorId:this.user.Data.User.DoctorId}).then(function(t){n.list[e].IsAdd=!0})},toUp:function(t,e){"ump"==this.$route.query.from||this.$route.query.from,this.$store.dispatch("pushcMed",t)},getMore:function(){var t=this,e=this.$refs.el,n=null;window.onscroll=function(){clearTimeout(n),n=setTimeout(function(){var n=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop;e.scrollHeight-n-window.innerHeight<100&&t.haveMore&&(t.page+=1,t.pull(!0))},100)}},confirm:function(){var t=this;this.ListDetails.forEach(function(e,n){e.Id==t.removeI.Id&&t.ListDetails.splice(n,1)}),this.list[this.removeIdx].state=null},delToPre:function(t,e){this.removeI=t,this.removeIdx=e,this.showConfirm=!0},toList:function(t){this.search=t,this.$store.dispatch("pushsearchText",t),this.medSearchList=null,this.haveMore=!0,this.id="",this.pull(!1)},searchByName:function(){var t=this;this.inputFlag||this.search&&this.$post("Prescription/Medication/GetMedicationByNameForOftenUsed",this.$pick({MedicationName:this.search,OrgId:this.user.Data.User.OrgId,DoctorId:this.user.Data.User.DoctorId,PageIndex:this.page,PageSize:20})).then(function(e){t.medSearchList=e.ReturnData})}}}),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"el",staticClass:"pdt pdb"},[n("div",{staticClass:"title"},[n("back"),t._v(" "),n("b"),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"药品搜索"},domProps:{value:t.search},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.searchFor(e):null},input:[function(e){e.target.composing||(t.search=e.target.value)},t.searchByName],compositionend:function(e){t.inputFlag=!1},compositionstart:function(e){t.inputFlag=!0}}}),t._v(" "),t.search?n("i",{staticClass:"clear",on:{click:function(e){t.search=""}}}):t._e(),t._v(" "),n("a",{staticClass:"sBtn",on:{click:t.searchFor}},[t._v("搜索")])],1),t._v(" "),t.medSearchList&&t.search?n("div",{staticClass:"medList"},t._l(t.medSearchList,function(e,i){return n("p",{key:i,on:{click:function(n){t.toList(e.Name)}}},[t._v("\n                "+t._s(e.Name)+" "+t._s(e.Brand)+"\n            ")])})):t._e(),t._v(" "),n("div",{staticClass:"list"},[!t.list.length&&t.pageShow?n("no-data",{attrs:{txt:"暂无药品"}}):t._e(),t._v(" "),t._l(t.list,function(e,i){return n("div",{key:i,staticClass:"med",attrs:{value:[i]}},[n("div",{staticClass:"info"},[n("img",{attrs:{src:e.PicturePath},on:{click:function(n){t.$router.push("/prescription-detail?id="+e.Id)}}}),t._v(" "),n("div",{on:{click:function(n){t.$router.push("/prescription-detail?id="+e.Id)}}},[n("p",[t._v(t._s(e.Brand)+" "+t._s(e.Name))]),t._v(" "),n("p",{staticClass:"gray"},[t._v(t._s(e.Manufacturer))]),t._v(" "),n("p",{staticClass:"price"},[t._v("￥"+t._s(e.Price))])]),t._v(" "),n("p",{staticClass:"operate"},[n("span",{staticClass:"gray"},[t._v(t._s(e.Specification))]),t._v(" "),"p"!==t.$route.query.from&&"ump"!==t.$route.query.from||e.state?t._e():n("span",{staticClass:"topre",on:{click:function(n){t.toUp(e,i),t.$router.push("/consumption?back=-3&idx="+i)}}},[t._v("加入处方笺")]),t._v(" "),"um"!==t.$route.query.from||e.IsAdd?t._e():n("span",{staticClass:"tousu",on:{click:function(n){t.toUm(e,i)}}},[t._v("加入常用药")]),t._v(" "),"up"!==t.$route.query.from&&"upp"!==t.$route.query.from||e.state?t._e():n("span",{staticClass:"tousu",on:{click:function(n){t.toUp(e,i),t.$router.push("/consumption?back=-4&idx="+i)}}},[t._v("加入常用处方")]),t._v(" "),"um"===t.$route.query.from&&e.IsAdd?n("span",{staticClass:"isusu"},[t._v("已加入常用药")]):t._e(),t._v(" "),"up"!==t.$route.query.from&&"upp"!==t.$route.query.from||"onUp"!==e.state?t._e():n("span",{staticClass:"delup",on:{click:function(n){t.delToPre(e,i)}}},[t._v("移出常用处方")]),t._v(" "),"p"!==t.$route.query.from&&"ump"!==t.$route.query.from||"onP"!==e.state?t._e():n("span",{staticClass:"delp",on:{click:function(n){t.delToPre(e,i)}}},[t._v("移出处方笺")])])])])})],2),t._v(" "),"up"===t.$route.query.from||"p"===t.$route.query.from||"ump"===t.$route.query.from||"upp"===t.$route.query.from?n("div",{staticClass:"bottomBack"},[n("div",{staticClass:"BackToPre"},[t.ListDetails&&t.ListDetails.length?n("span",[t._v(t._s(t.ListDetails.length))]):t._e()]),t._v(" "),n("div",{staticClass:"textBox"},[n("p",[t._v("已添加"+t._s(t.ListDetails?t.ListDetails.length:0)+"种药品")]),t._v(" "),n("p",[t._v("总金额: ￥"+t._s(t.totalPrice))])]),t._v(" "),n("span",{staticClass:"butt",on:{click:t.BackTo}},[t._v("返回处方笺")])]):t._e(),t._v(" "),n("confirm",{on:{"on-cancel":function(e){t.showConfirm=!1},"on-confirm":t.confirm},model:{value:t.showConfirm,callback:function(e){t.showConfirm=e},expression:"showConfirm"}},[t._v("确定将该药品移出处方笺吗？")])],1)},c=[],d={render:s,staticRenderFns:c},l=d,u=n("VU/8"),p=i,f=u(r,l,!1,p,"data-v-47c3ed85",null);e.default=f.exports}});