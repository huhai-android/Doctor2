webpackJsonp([127],{"48wf":function(t,e,n){"use strict";function a(t){n("JnWn")}Object.defineProperty(e,"__esModule",{value:!0});var i=n("8pLc"),s=n("pKZN"),o=(i.a,s.a,{components:{noData:i.a,back:s.a},data:function(){return{dShow:!1,AppointmentList:[],HospitalName:this.$store.state.saveVipData.Hospital.HospitalName,index:null,itemShow:!1,itemList:[],item:[],HospitalList:[],DepartmentList:[],areaList:[],num:0,DepartmentId:this.$store.state.saveVipData&&this.$store.state.saveVipData.Department?this.$store.state.saveVipData.Department.DepartmentId:0,vipList:this.$store.state.saveVipData.vipList,ListDetails:this.$store.state.preList}},created:function(){this.getArea(),this.getAppointment(this.DepartmentId,this.$store.state.saveVipData.Department)},methods:{dDialog:function(){this.dShow=!this.dShow},getArea:function(){var t=this;this.$get("AppointmentAPI/Appointment/GetApHospitalCity",{}).then(function(e){var n=[];e.forEach(function(t){n.push(t.CityName)}),n.unshift("全部地区"),t.itemList=[n],t.areaList=e;var a=0;t.$store.state.saveVipData&&t.$store.state.saveVipData.CityName?t.areaList.forEach(function(e){e.CityName===t.$store.state.saveVipData.CityName&&(t.item[0]=e.CityName,a=e.CityId)}):(t.item[0]="全部地区",a=0),t.getHospital(a)})},getHospital:function(t){var e=this;this.$post("AppointmentAPI/Appointment/QueryApHospitalPage",{HospitalName:"",CityId:t,AppointmentTypeId:this.$store.state.saveVipData.AppointmentTypeId,PageIndex:1,PageSize:100}).then(function(t){e.HospitalList=t.ReturnData,e.$store.state.saveVipData&&e.$store.state.saveVipData.Hospital?e.getDepartment(e.$store.state.saveVipData.Hospital):e.getDepartment(e.HospitalList[0])})},getDepartment:function(t,e){var n=this;if(!t)return void(this.DepartmentList=[]);this.HospitalList.forEach(function(e,a){t.HospitalId===e.HospitalId&&(n.num=a,n.$store.state.saveVipData.Hospital=t,n.$store.dispatch("pushsaveVipData",n.$store.state.saveVipData))}),this.$post("AppointmentAPI/Appointment/QueryApDepartmentPage",{HospitalId:t.HospitalId,HospitalName:t.HospitalName,PageIndex:1,PageSize:100}).then(function(t){n.DepartmentList=t.ReturnData})},getAppointment:function(t,e){var n=this;this.DepartmentId=t,this.$store.state.saveVipData.Department=e,this.$store.dispatch("pushsaveVipData",this.$store.state.saveVipData),this.dShow=!1,this.$get("AppointmentAPI/Appointment/QueryAppointmentPrices",{DepartmentId:t}).then(function(t){n.AppointmentList=t})},changeVal:function(){var t=this,e=0,n=0;this.areaList.forEach(function(a){a.CityName===t.item[0]&&(n=a.CityId,e=1)}),this.getHospital(n),this.$store.state.saveVipData.Hospital=null,this.$store.state.saveVipData.CityName=this.item[0],this.$store.dispatch("pushsaveVipData",this.$store.state.saveVipData)},goAllGoods:function(t){var e=this,n=this.vipList;if(n.GoodsNum=1,n.isVip=2,n.GoodsId=t.ApPriceId,n.DrPositionName=t.DrPositionName,n.FirstTypeName=t.FirstTypeName,n.SecondTypeName=t.SecondTypeName,n.HospitalName=t.HospitalName,n.DepartmentName=t.DepartmentName,n.IsAppointment=t.IsAppointment,n.VipPrice=t.AppointmentPrice,n.RecommondAmount=t.RecomAmount,this.ListDetails&&this.ListDetails.length){var a=0;this.ListDetails.forEach(function(t,i){t.GoodsSource==e.vipList.GoodsSource&&t.SpecialistGoodsId==e.vipList.SpecialistGoodsId&&t.SpecialistHosGroupId==e.vipList.SpecialistHosGroupId&&t.GoodsId==e.vipList.GoodsId&&(e.ListDetails.splice(i,1,n),a=1)}),0==a&&this.ListDetails.push(n)}else this.ListDetails.push(n);this.$store.dispatch("pushnavNum",1),this.$store.dispatch("pushpreList",this.ListDetails),this.$store.dispatch("pushsaveVipData",this.$store.state.saveVipData),this.$router.push("/allGoods")}}}),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"el",staticClass:"pdt"},[n("div",{staticClass:"title"},[n("back"),t._v(" "),n("span",{staticClass:"name"},[t._v("VIP预约")]),t._v(" "),n("span")],1),t._v(" "),n("div",{staticClass:"department"},[n("div",{staticClass:"deSorts"},[n("p",{on:{click:function(e){t.dDialog()}}},[t._v(t._s(t.HospitalName)),n("i")])]),t._v(" "),n("div",{staticClass:"departmentMain"},t._l(t.AppointmentList,function(e,a){return n("div",{key:a,staticClass:"departmentTab"},[n("div",{staticClass:"departmentTab-l"},[n("h6",[t._v(t._s(e.DrPositionName))]),t._v(" "),n("p",[t._v(t._s(e.FirstTypeName)+" "+t._s(e.SecondTypeName))]),t._v(" "),n("p",[t._v(t._s(e.HospitalName)+" "+t._s(e.DepartmentName))]),t._v(" "),n("p",{staticClass:"red"},[e.IsAppointment?n("em",[t._v("预约金：")]):t._e(),t._v("￥"+t._s(Number(e.AppointmentPrice)))]),t._v(" "),n("p",[n("span",[t._v("优选服务费"+t._s(Number(e.RecomAmount))+"元")])])]),t._v(" "),n("div",{staticClass:"departmentTab-r",on:{click:function(n){t.goAllGoods(e)}}},[n("icon",{attrs:{type:"circle"}})],1)])}))]),t._v(" "),t.dShow?n("div",{staticClass:"departmentDialog"},[n("div",{staticClass:"sorts"},[n("p",{on:{click:function(e){t.itemShow=!0}}},[t._v(t._s(t.item[0]?t.item[0]:"全部地区")),n("i")])]),t._v(" "),n("div",{staticClass:"box"},[n("div",{staticClass:"l"},t._l(t.HospitalList,function(e,a){return n("div",{key:a,class:{on:t.num==a},on:{click:function(n){t.getDepartment(e,a)}}},[t._v(t._s(e.HospitalName))])})),t._v(" "),n("div",{staticClass:"r"},t._l(t.DepartmentList,function(e,a){return n("div",{key:a,class:{on:t.DepartmentId===e.DepartmentId},on:{click:function(n){t.getAppointment(e.DepartmentId,e)}}},[t._v(t._s(e.DepartmentName)+" "),n("em")])}))])]):t._e(),t._v(" "),t.dShow?n("div",{staticClass:"departmentDialogBg"}):t._e(),t._v(" "),n("popup-picker",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{show:t.itemShow,data:t.itemList},on:{"on-change":function(e){t.changeVal()},"on-hide":function(e){t.itemShow=!1}},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}})],1)},r=[],d={render:p,staticRenderFns:r},c=d,l=n("VU/8"),m=a,f=l(o,c,!1,m,"data-v-431c078c",null);e.default=f.exports},JnWn:function(t,e,n){var a=n("g9fk");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("5380dbf2",a,!0,{})},g9fk:function(t,e,n){var a=n("kxFB");e=t.exports=n("FZ+f")(!1),e.push([t.i,"\n.department .deSorts[data-v-431c078c] {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  height: 1.2rem;\n  border-bottom: 1px solid #ececec;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n  background: #fff;\n  padding: 0 0.4rem;\n  font-size: 14px;\n}\n.department .deSorts p[data-v-431c078c] {\n    -webkit-box-flex: 1;\n    -webkit-flex: 1;\n            flex: 1;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n            align-items: center;\n    -webkit-box-pack: start;\n    -webkit-justify-content: flex-start;\n            justify-content: flex-start;\n    height: 100%;\n    font-size: 15px;\n}\n.department .deSorts p i[data-v-431c078c] {\n      display: block;\n      width: 0.4rem;\n      height: 0.4rem;\n      background: url("+a(n("usbB"))+") no-repeat center;\n      margin-left: 0.26667rem;\n      margin-top: 0.13333rem;\n}\n.department .departmentMain[data-v-431c078c] {\n  padding-bottom: 0.4rem;\n}\n.department .departmentMain .departmentTab[data-v-431c078c] {\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-pack: justify;\n    -webkit-justify-content: space-between;\n            justify-content: space-between;\n    padding: 0.26667rem 0.4rem;\n    border-bottom: 1px solid #eee;\n}\n.department .departmentMain .departmentTab h6[data-v-431c078c] {\n      font-size: 16px;\n}\n.department .departmentMain .departmentTab p[data-v-431c078c] {\n      font-size: 14px;\n      color: #888888;\n      margin-top: 0.10667rem;\n}\n.department .departmentMain .departmentTab p span[data-v-431c078c] {\n        display: inline-block;\n        padding: 0.13333rem 0.4rem;\n        border-radius: 0.26667rem;\n        background-color: #ff8daa;\n        font-size: 12px;\n        color: #fff;\n}\n.department .departmentMain .departmentTab p em[data-v-431c078c] {\n        font-style: normal;\n}\n.department .departmentMain .departmentTab p.red[data-v-431c078c] {\n      color: red;\n}\n.departmentDialog[data-v-431c078c] {\n  position: fixed;\n  z-index: 10;\n  width: 100%;\n  height: 60vh;\n  left: 0;\n  top: 1.2rem;\n  background-color: #fff;\n}\n.departmentDialogBg[data-v-431c078c] {\n  position: fixed;\n  z-index: 9;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  background-color: #333;\n  opacity: 0.5;\n}\n.departmentTab-r[data-v-431c078c] {\n  padding-top: 1.06667rem;\n}\n.sorts[data-v-431c078c] {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  height: 0.93333rem;\n  border-bottom: 1px solid #ececec;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n  background: #fff;\n  padding: 0 0.4rem;\n  top: 1.2rem;\n  font-size: 14px;\n}\n.sorts p[data-v-431c078c] {\n    -webkit-box-flex: 1;\n    -webkit-flex: 1;\n            flex: 1;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n            align-items: center;\n    -webkit-box-pack: start;\n    -webkit-justify-content: flex-start;\n            justify-content: flex-start;\n    height: 100%;\n    font-size: 15px;\n}\n.sorts p i[data-v-431c078c] {\n      display: block;\n      width: 0.4rem;\n      height: 0.4rem;\n      background: url("+a(n("usbB"))+") no-repeat center;\n      margin-left: 0.26667rem;\n      margin-top: 0.13333rem;\n}\n.box[data-v-431c078c] {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  background: #fff;\n  height: 60vh;\n  font-size: 13px;\n}\n.box .l[data-v-431c078c] {\n    -webkit-box-flex: 1;\n    -webkit-flex: 1;\n            flex: 1;\n    overflow-y: scroll;\n    background-color: #f7f8fa;\n}\n.box .l div[data-v-431c078c] {\n      padding-left: 0.4rem;\n      line-height: 1.06667rem;\n      border-bottom: 1px solid #eeeff0;\n      font-size: 16px;\n}\n.box .l div.on[data-v-431c078c] {\n      background-color: #fff;\n}\n.box .r[data-v-431c078c] {\n    -webkit-box-flex: 1;\n    -webkit-flex: 1;\n            flex: 1;\n    overflow-y: scroll;\n}\n.box .r div[data-v-431c078c] {\n      padding-left: 0.4rem;\n      line-height: 1.06667rem;\n      border-bottom: 1px solid #f1f1f2;\n      position: relative;\n      font-size: 14px;\n}\n.box .r div em[data-v-431c078c] {\n        display: block;\n        width: 0.42667rem;\n        height: 0.42667rem;\n        background: url("+a(n("WjqE"))+") no-repeat;\n        background-size: contain;\n        position: absolute;\n        top: 0.33333rem;\n        right: 0.4rem;\n}\n.box .r div.on[data-v-431c078c] {\n      background-color: #fff;\n}\n.pdt[data-v-431c078c] {\n  padding-bottom: 0;\n  background-color: #fff;\n}\n",""])}});