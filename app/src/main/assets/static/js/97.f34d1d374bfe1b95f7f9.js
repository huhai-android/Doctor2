webpackJsonp([97],{Pukg:function(e,t,n){var a=n("nMNH");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("3bcb2f77",a,!0,{})},fD1z:function(e,t,n){"use strict";function a(e){n("Pukg")}Object.defineProperty(t,"__esModule",{value:!0});var s=n("mvHQ"),i=n.n(s),o=n("pKZN"),r=n("8pLc"),c=(o.a,r.a,{components:{back:o.a,noData:r.a},data:function(){return{title:"合作机构",search:"",haveMore:!0,list:[],inputFlag:!1,inspctArea:0,area:null,user:this.$store.state.userInfo,showStae:"circle",chooseData:null,save:JSON.parse(localStorage.getItem("saveName")),contrastCensorateId:null,listShow:!0,checkIdshow:1}},created:function(){this.pull()},mounted:function(){this.save&&(this.showStae="success-circle",this.$route.query.id||this.$router.push("/inspect/pharmacy?id=1")),this.$route.query.id?this.checkIdshow=1:this.checkIdshow=2},beforeDestroy:function(){window.onscroll=null},methods:{searchFor:function(e){this.pull()},pull:function(){var e=this;this.$store.state.inspctArea?(this.inspctArea=this.$store.state.inspctArea.AreaId,this.area=this.$store.state.inspctArea.AreaName,this.$post("InspectionAPI/Censorate/QuerySecondCensoratePage",{CensorateName:this.search,CensorateCode:"",AreaId:this.inspctArea,AreaName:"",PageIndex:1,PageSize:100}).then(function(t){var n=t.ReturnData;t.ReturnData&&t.ReturnData.length?e.listShow=!0:e.listShow=!1,e.$get("InspectionAPI/Censorate/QueryDefaultCensorate",{DrId:e.user.Data.User.DoctorId}).then(function(t){n.forEach(function(n){n.CensorateId===t.CensorateId?(n.state="success",e.chooseData=n):n.state="circle"}),e.list=n,e.contrastCensorateId=t.CensorateId})})):this.$bridge.callhandler("pullArea","",function(t){t?e.$post("InspectionAPI/Censorate/QuerySecondCensoratePage",{CensorateName:e.search,CensorateCode:"",AreaId:"",AreaName:t,PageIndex:1,PageSize:100}).then(function(n){e.area=t;var a=n.ReturnData;n.ReturnData&&n.ReturnData.length?e.listShow=!0:e.listShow=!1,e.$get("InspectionAPI/Censorate/QueryDefaultCensorate",{DrId:e.user.Data.User.DoctorId}).then(function(t){a.forEach(function(n){n.CensorateId===t.CensorateId?(n.state="success",e.chooseData=n):n.state="circle"}),e.list=a,e.contrastCensorateId=t.CensorateId})}):e.$post("InspectionAPI/Censorate/QuerySecondCensoratePage",{CensorateName:e.search,CensorateCode:"",AreaId:0,AreaName:"",PageIndex:1,PageSize:100}).then(function(t){var n=t.ReturnData;t.ReturnData&&t.ReturnData.length?e.listShow=!0:e.listShow=!1,e.$get("InspectionAPI/Censorate/QueryDefaultCensorate",{DrId:e.user.Data.User.DoctorId}).then(function(t){n.forEach(function(n){n.CensorateId===t.CensorateId?(n.state="success",e.chooseData=n):n.state="circle"}),e.list=n,e.contrastCensorateId=t.CensorateId})}),responseCallback("接收到方法")})},organizationChoose:function(e){"circle"==e.state&&(this.list.forEach(function(e){e.state="circle"}),e.state="success"),this.chooseData=e},circleSate:function(){"circle"==this.showStae?this.showStae="success-circle":this.showStae="circle"},btnSave:function(){var e=this,t=0;if(this.list.forEach(function(e){-1!=e.state.indexOf("success")&&(t=1)}),0==t)return this.$toast("请选择合作机构");"success-circle"==this.showStae&&(this.save?(localStorage.setItem("saveName",""),localStorage.setItem("saveName",i()(this.save))):localStorage.setItem("saveName",i()(1))),this.contrastCensorateId==this.chooseData.CensorateId?this.$route.query.id?this.$router.back():this.$router.push("/inspect/pharmacy"):this.$post("InspectionAPI/Censorate/SaveDrCensorate",{DrId:this.user.Data.User.DoctorId,DrName:this.user.Data.User.DoctorName,CensorateId:this.chooseData.CensorateId,CensorateName:this.chooseData.CensorateName}).then(function(t){e.$store.dispatch("pushcheckCkooseList",[]),e.$store.dispatch("pushisShowXC",!1),e.$store.dispatch("pushsaveInput",null),e.$route.query.id?e.$router.back():e.$router.push("/inspect/pharmacy")})},getMore:function(){var e=this,t=this.$refs.el,n=null;window.onscroll=function(){clearTimeout(n),n=setTimeout(function(){var n=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop;t.scrollHeight-n-window.innerHeight<100&&e.haveMore&&(e.page+=1,e.pull(!0))},100)}}}}),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"el",staticClass:"container pdt"},[n("div",{staticClass:"title"},[n("back",{attrs:{checkId:e.checkIdshow}}),e._v(" "),n("span",{staticClass:"name"},[e._v(e._s(e.title))]),e._v(" "),n("a")],1),e._v(" "),n("div",{staticClass:"search"},[n("span",{on:{click:function(t){e.$router.push("/inspectArea")}}},[e._v(e._s(e.area?e.area:"选择地区")),n("i")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{type:"search",placeholder:"输入机构名称"},domProps:{value:e.search},on:{compositionend:function(t){e.inputFlag=!1},compositionstart:function(t){e.inputFlag=!0},keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchFor(t):null},input:[function(t){t.target.composing||(e.search=t.target.value)},e.searchFor]}}),e._v(" "),n("span",{staticClass:"sBtn",on:{click:e.searchFor}},[e._v("搜索")])]),e._v(" "),n("div",{staticClass:"organization"},[e._l(e.list,function(t,a){return e.list&&e.list.length&&e.listShow?n("div",{key:a,staticClass:"organization-tab"},[n("h6",{on:{click:function(n){e.organizationChoose(t)}}},[e._v(e._s(t.CensorateName)+" "),n("icon",{attrs:{type:t.state}})],1),e._v(" "),t.CheckTypeNames?n("p",e._l(t.CheckTypeNames.split(","),function(t){return n("i",[e._v(e._s(t))])})):e._e()]):e._e()}),e._v(" "),e.list.length||e.listShow?e._e():n("div",{staticClass:"organization-tab"},[n("h6",[e._v("该区域暂无机构")])])],2),e._v(" "),n("div",{staticClass:"btn"},[this.$route.query.id?e._e():n("p",{staticClass:"organization-p",on:{click:function(t){e.circleSate()}}},[n("icon",{attrs:{type:e.showStae}}),e._v("下次不再显示该页面")],1),e._v(" "),n("span",{class:{marT:this.$route.query.id},on:{click:function(t){e.btnSave()}}},[e._v("确定")])])])},h=[],u={render:l,staticRenderFns:h},d=u,p=n("VU/8"),f=a,g=p(c,d,!1,f,"data-v-728947a3",null);t.default=g.exports},nMNH:function(e,t,n){var a=n("kxFB");t=e.exports=n("FZ+f")(!1),t.push([e.i,"\n.search[data-v-728947a3] {\n  background: #fff;\n  height: 1.6rem;\n  padding: 0 0.13333rem 0 0.4rem;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n          justify-content: center;\n  font-size: 0.37333rem;\n  border-top: 1px #eee solid;\n  border-bottom: 1px #eee solid;\n}\n.search input[data-v-728947a3] {\n    height: 0.8rem;\n    border: 1px solid #ececec;\n    width: 75%;\n    border-radius: 30px;\n    padding: 0 0.4rem;\n    font-size: 0.37333rem;\n}\n.search span[data-v-728947a3] {\n    -webkit-box-flex: 0;\n    -webkit-flex: none;\n            flex: none;\n    margin-right: 0.13333rem;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    height: 100%;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n            align-items: center;\n    color: #333;\n    font-size: 0.37333rem;\n}\n.search span i[data-v-728947a3] {\n      display: block;\n      min-width: 0.2rem;\n      min-height: 0.2rem;\n      background: url("+a(n("HY/B"))+") no-repeat center;\n      background-size: contain;\n      margin-left: 0.13333rem;\n}\n.search .sBtn[data-v-728947a3] {\n    width: 1.6rem;\n    height: 0.8rem;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n            align-items: center;\n    -webkit-box-pack: center;\n    -webkit-justify-content: center;\n            justify-content: center;\n    background: #306bce;\n    color: #fff;\n    border-radius: 30px;\n    margin-left: 0.26667rem;\n}\n.organization[data-v-728947a3] {\n  background-color: #fff;\n  height: 69vh;\n  overflow-y: scroll;\n  -webkit-overflow-scrolling: touch;\n  -webkit-transform: translateZ(0px);\n}\n.organization .organization-tab[data-v-728947a3] {\n    padding: 0.33333rem 0.26667rem;\n    border-bottom: 1px #eee solid;\n}\n.organization .organization-tab h6[data-v-728947a3] {\n      display: -webkit-box;\n      display: -webkit-flex;\n      display: flex;\n      -webkit-box-pack: justify;\n      -webkit-justify-content: space-between;\n              justify-content: space-between;\n      font-size: 15px;\n}\n.organization .organization-tab p[data-v-728947a3] {\n      padding-right: 0.13333rem;\n}\n.organization .organization-tab p i[data-v-728947a3] {\n        display: inline-block;\n        margin-right: 0.2rem;\n        padding: 0.06667rem 0.2rem;\n        border: 1px #306bce solid;\n        border-radius: 0.2rem;\n        color: #306bce;\n        font-size: 12px;\n        font-style: normal;\n        margin-top: 0.2rem;\n}\n.btn[data-v-728947a3] {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 2.66667rem;\n  background-color: #fff;\n}\n.btn .organization-p[data-v-728947a3] {\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-pack: center;\n    -webkit-justify-content: center;\n            justify-content: center;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n            align-items: center;\n    text-align: center;\n    font-size: 14px;\n    color: #999999;\n    margin: 0.13333rem 0 0.26667rem;\n}\n.btn span[data-v-728947a3] {\n    width: 80%;\n    height: 0.93333rem;\n    line-height: 0.93333rem;\n    display: block;\n    text-align: center;\n    background: #306bce;\n    color: #fff;\n    border-radius: 30px;\n    margin-left: 10%;\n}\n.btn .marT[data-v-728947a3] {\n    margin-top: 0.66667rem;\n}\n",""])}});