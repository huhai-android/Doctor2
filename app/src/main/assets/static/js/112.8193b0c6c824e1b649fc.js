webpackJsonp([112],{"/30Q":function(n,e,t){var i=t("Cduf");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);t("rjj0")("1aa644f4",i,!0,{})},"6VdA":function(n,e,t){"use strict";function i(n){t("/30Q")}Object.defineProperty(e,"__esModule",{value:!0});var a=t("pKZN"),s=t("8pLc"),o=(a.a,s.a,{components:{back:a.a,noData:s.a},data:function(){return{page:1,list:[],haveMore:!1,pageShow:!1,active:1,items:[],act:0,children:[],search:"",user:this.$store.state.userInfo,ListDetails:this.$store.state.upList,medSearchList:null,inputFlag:!1,medSearchList2:null,medBlurSH:!1,Refresh:this.$route.query.Refresh}},created:function(){this.pull(),this.pullAllPrescription()},mounted:function(){this.getMore()},beforeDestroy:function(){window.onscroll=null},beforeRouteLeave:function(n,e,t){window.onscroll=null,e.meta.keepAlive&&(e.meta.scollTopPosition=this.scrollTopDistance),t()},beforeRouteEnter:function(n,e,t){var i=!1;t(function(t){t.getMore(),t.Refresh=t.$route.query.Refresh,(-1!=e.path.indexOf("allPrescription")&&null!=t.$store.state.prevUrl||!t.$store.state.isFresh||t.Refresh)&&(i=!0),i?(t.page=1,t.haveMore=!0,n.meta.scollTopPosition=0,t.pageShow=!1,t.listShow=!1,t.pullAllPrescription(!1),t.$store.dispatch("pushIsFresh",!0)):setTimeout(function(){t.$refs.el.scrollTop=n.meta.scollTopPosition},1)})},methods:{NewSwtich:function(){this.$store.dispatch("pushsaveInfo",null),this.$store.dispatch("pushchList",[]),this.$store.dispatch("pushchState",1),this.$router.push("/chooseDrugs?Swtich=1")},usePre:function(n){this.$store.dispatch("pushchList",[]),this.$store.dispatch("pushisUsePre",!1),this.$router.push("/cM/prescription?DataSource=3&DataId="+n.Id+"&subId="+n.MedicationForm)},pullAllPrescription:function(n){var e=this;this.$post("Prescription/Prescription/GetAllTCMPrescriptionOftenUsed",{Name:this.search,DoctorId:this.user.Data.User.DoctorId,OrgId:this.user.Data.User.OrgId,PageIndex:this.page,PageSize:15}).then(function(t){e.pageShow=!0,!t.ReturnData||t.ReturnData.length<15?e.haveMore=!1:e.haveMore=!0,n?t.ReturnData.forEach(function(n){e.list.push(n)}):e.list=t.ReturnData,e.list.forEach(function(n,t){var i=0;n.ListDetails.forEach(function(n){i+=Number(n.Quantity)}),e.list[t].numTotal=i})})},choose:function(n,e){this.act=e,this.pull(n)},searchFor:function(){this.$router.push("/jdPrescription?searchName="+this.search)},pull:function(n){var e=this;n?this.$post("Prescription/Prescription/GetPrescriptionClass",{ParentId:n}).then(function(n){e.children=n}):(n=0,this.$post("Prescription/Prescription/GetPrescriptionClass",{ParentId:n}).then(function(n){e.items=n,e.pull(n[0].Id)}))},goList:function(n){this.$router.push("/jdPrescription?ClassId="+n.Id)},getMore:function(){var n=this,e=this.$refs.el,t=null;window.onscroll=function(){clearTimeout(t),t=setTimeout(function(){var t=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop;e.scrollHeight-t-window.innerHeight<100&&n.haveMore&&(n.page+=1,n.pullAllPrescription(!0))},100)}}}}),r=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{ref:"el",staticClass:"pdt"},[t("div",{staticClass:"title"},[t("back"),n._v(" "),t("span",{staticClass:"name"},[n._v("常用方/经典方")]),n._v(" "),t("a")],1),n._v(" "),t("div",{staticClass:"search"},[t("input",{directives:[{name:"model",rawName:"v-model",value:n.search,expression:"search"}],attrs:{type:"search",placeholder:"搜索经典方名称"},domProps:{value:n.search},on:{compositionend:function(e){n.inputFlag=!1},compositionstart:function(e){n.inputFlag=!0},input:function(e){e.target.composing||(n.search=e.target.value)}}}),n._v(" "),t("i"),n._v(" "),t("span",{staticClass:"sBtn",on:{click:function(e){n.searchFor()}}},[n._v("搜索")])]),n._v(" "),t("div",{staticClass:"tab"},[t("p",{class:{on:1==n.active},on:{click:function(e){n.active=1}}},[t("span",[n._v("常用方")]),n._v(" "),t("i",{staticClass:"line"})]),n._v(" "),t("p",{class:{on:2==n.active},on:{click:function(e){n.active=2}}},[t("span",[n._v("经典方")]),n._v(" "),t("i",{staticClass:"line"})])]),n._v(" "),1==n.active?t("div",{staticClass:"main-one"},[n._l(n.list,function(e,i){return t("div",{key:i,staticClass:"preList"},[t("h2",[n._v("共"+n._s(e.ListDetails.length)+"味 "+n._s(e.numTotal)+"g "),t("span",{on:{click:function(t){n.usePre(e)}}},[n._v("使用处方")])]),n._v(" "),t("p",[n._v("诊断："),t("i",[n._v(n._s(e.Diagnoses))])]),n._v(" "),t("p",[n._v("处方："),n._l(e.ListDetails,function(e){return t("i",[n._v(n._s(e.Name)+n._s(e.Quantity)+"克，")])})],2)])}),n._v(" "),!n.list.length&&n.pageShow?t("no-data",{attrs:{txt:"暂无常用处方"}}):n._e()],2):n._e(),n._v(" "),2==n.active?t("div",{staticClass:"main-two"},[t("div",{staticClass:"items"},[t("div",{staticClass:"first"},n._l(n.items,function(e,i){return t("p",{key:i,class:{on:i===n.act},on:{click:function(t){n.choose(e.Id,i)}}},[n._v("\n\t\t\t            "+n._s(e.Name)+"\n\t\t\t        ")])})),n._v(" "),t("div",{staticClass:"second"},n._l(n.children,function(e,i){return t("p",{key:i,on:{click:function(t){n.goList(e)}}},[n._v("\n\t\t\t            "+n._s(e.Name)+"\n\t\t\t            "),t("i")])}))])]):n._e(),n._v(" "),1==n.active?t("div",{staticClass:"newBTn"},[t("span",{on:{click:function(e){n.NewSwtich()}}},[n._v("新建常用处方")])]):n._e()])},c=[],l={render:r,staticRenderFns:c},d=l,p=t("VU/8"),u=i,b=p(o,d,!1,u,"data-v-58d271ac",null);e.default=b.exports},Cduf:function(n,e,t){var i=t("kxFB");e=n.exports=t("FZ+f")(!1),e.push([n.i,"\n.pdt[data-v-58d271ac] {\n  padding-bottom: 0;\n}\n.medList[data-v-58d271ac] {\n  background: #fff;\n  position: absolute;\n  width: 100%;\n  padding: 0 0.4rem;\n  height: 78vh;\n  overflow: scroll;\n}\n.medList p[data-v-58d271ac] {\n    height: 1.06667rem;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-pack: justify;\n    -webkit-justify-content: space-between;\n            justify-content: space-between;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n            align-items: center;\n    border-bottom: 1px solid #ececec;\n}\n.medList p span[data-v-58d271ac] {\n      display: -webkit-box;\n      display: -webkit-flex;\n      display: flex;\n      -webkit-box-pack: left;\n      -webkit-justify-content: left;\n              justify-content: left;\n      -webkit-box-align: center;\n      -webkit-align-items: center;\n              align-items: center;\n}\n.medList p span i[data-v-58d271ac] {\n        display: block;\n        width: 0.4rem;\n        height: 0.4rem;\n        background: url("+i(t("hw50"))+") no-repeat center;\n        background-size: contain;\n        margin-right: 0.13333rem;\n}\n.medList p em[data-v-58d271ac] {\n      display: block;\n      width: 0.4rem;\n      height: 0.4rem;\n      background: url("+i(t("hIgm"))+") no-repeat center;\n      background-size: contain;\n}\n.title[data-v-58d271ac] {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  height: 1.2rem;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n  -webkit-box-pack: justify;\n  -webkit-justify-content: space-between;\n          justify-content: space-between;\n  background: #fff;\n}\n.title i[data-v-58d271ac] {\n    display: block;\n    height: 0.46667rem;\n    width: 0.26667rem;\n    background: url("+i(t("P9/e"))+") no-repeat center;\n    background-size: cover;\n}\n.title input[data-v-58d271ac] {\n    -webkit-box-flex: 1;\n    -webkit-flex: 1;\n            flex: 1;\n    height: 70%;\n    margin-left: 0.4rem;\n    background: #f4f4f4;\n    border-radius: 20px;\n    padding: 0 1.06667rem;\n}\n.title b[data-v-58d271ac] {\n    display: block;\n    width: 0.53333rem;\n    height: 0.53333rem;\n    background: url("+i(t("wIlF"))+") no-repeat center;\n    position: absolute;\n    left: 1.46667rem;\n}\n.search[data-v-58d271ac] {\n  height: 1.33333rem;\n  background: #fff;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n          justify-content: center;\n  position: relative;\n  padding: 0 0.4rem;\n}\n.search input[data-v-58d271ac] {\n    height: 60%;\n    width: 8rem;\n    background: #f4f4f4;\n    border-radius: 30px;\n    padding: 0 0.4rem 0 1.06667rem;\n}\n.search i[data-v-58d271ac] {\n    display: block;\n    width: 0.4rem;\n    height: 0.4rem;\n    background: url("+i(t("wIlF"))+") no-repeat center;\n    position: absolute;\n    left: 7%;\n    top: 0.46667rem;\n}\n.search .sBtn[data-v-58d271ac] {\n    min-width: 1.6rem;\n    height: 0.8rem;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n            align-items: center;\n    -webkit-box-pack: center;\n    -webkit-justify-content: center;\n            justify-content: center;\n    background: #306bce;\n    color: #fff;\n    border-radius: 10px;\n    margin-left: 0.26667rem;\n}\n.tab[data-v-58d271ac] {\n  background: #fff;\n  height: 1.2rem;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-justify-content: space-around;\n          justify-content: space-around;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n  color: #6c6c6c;\n  margin-bottom: 0.13333rem;\n  padding-top: 0.13333rem;\n}\n.tab p[data-v-58d271ac] {\n    height: 100%;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n    -webkit-flex-direction: column;\n            flex-direction: column;\n    -webkit-box-pack: justify;\n    -webkit-justify-content: space-between;\n            justify-content: space-between;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n            align-items: center;\n    padding-top: 0.26667rem;\n}\n.tab .btn[data-v-58d271ac] {\n    color: #fff;\n    width: 2.4rem;\n    height: 0.8rem;\n    line-height: 0.8rem;\n    background: #306bce;\n    text-align: center;\n    border-radius: 5px;\n}\n.tab .line[data-v-58d271ac] {\n    display: block;\n    background: #fff;\n    width: 0.8rem;\n    height: 2px;\n}\n.tab .on[data-v-58d271ac] {\n    color: #306bce;\n}\n.tab .on .line[data-v-58d271ac] {\n      background: #306bce;\n}\n.items[data-v-58d271ac] {\n  background: #fff;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  margin-top: 0.4rem;\n}\n.items .first[data-v-58d271ac] {\n    width: 40%;\n    height: 76vh;\n    overflow: scroll;\n    background: #e4e4e4;\n}\n.items .first p[data-v-58d271ac] {\n      border-bottom: 1px solid #fff;\n}\n.items .first .on[data-v-58d271ac] {\n      background: #fff;\n}\n.items .second[data-v-58d271ac] {\n    width: 60%;\n    height: 76vh;\n    overflow: scroll;\n}\n.items .second p[data-v-58d271ac] {\n      border-bottom: 1px solid #f5f5f5;\n      margin-right: 0rem;\n      display: -webkit-box;\n      display: -webkit-flex;\n      display: flex;\n      -webkit-box-pack: justify;\n      -webkit-justify-content: space-between;\n              justify-content: space-between;\n}\n.items .second i[data-v-58d271ac] {\n      display: block;\n      width: 0.4rem;\n      height: 0.4rem;\n      background: url("+i(t("b9hs"))+") no-repeat center;\n      background-size: contain;\n}\n.items p[data-v-58d271ac] {\n    height: 1.2rem;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n            align-items: center;\n    padding: 0 0.4rem;\n}\n.main-one[data-v-58d271ac] {\n  padding-bottom: 1.6rem;\n}\n.preList[data-v-58d271ac] {\n  background-color: #fff;\n  padding: 0.4rem;\n  margin-bottom: 0.13333rem;\n}\n.preList h2[data-v-58d271ac] {\n    font-weight: normal;\n    font-size: 16px;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-pack: justify;\n    -webkit-justify-content: space-between;\n            justify-content: space-between;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n            align-items: center;\n    border-bottom: 1px #eee solid;\n    padding-bottom: 0.26667rem;\n}\n.preList h2 span[data-v-58d271ac] {\n      border: 1px #306bc9 solid;\n      padding: 0.13333rem 0.26667rem;\n      color: #306bc9;\n      border-radius: 0.13333rem;\n      font-size: 14px;\n}\n.preList p[data-v-58d271ac] {\n    margin-top: 0.2rem;\n    font-size: 15px;\n}\n.preList p i[data-v-58d271ac] {\n      font-style: normal;\n      font-size: 14px;\n      color: #999999;\n}\n.newBTn[data-v-58d271ac] {\n  position: fixed;\n  width: 100%;\n  z-index: 100;\n  height: 1.6rem;\n  left: 0;\n  bottom: 0;\n  background-color: #fff;\n}\n.newBTn span[data-v-58d271ac] {\n    border: 1px #306bc9 solid;\n    color: #306bc9;\n    border-radius: 0.33333rem;\n    font-size: 14px;\n    width: 80%;\n    line-height: 0.93333rem;\n    margin: 0.33333rem auto;\n    display: block;\n    text-align: center;\n}\n",""])}});