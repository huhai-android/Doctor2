webpackJsonp([143],{Lpkl:function(e,n,t){"use strict";function a(e){t("kTaM")}Object.defineProperty(n,"__esModule",{value:!0});var i=t("mvHQ"),r=t.n(i),o=t("pKZN"),s=t("U7mS"),d=t.n(s),l=(o.a,{components:{back:o.a},data:function(){return{showPopup:!1,ReportImageType:[],Diagnosis:"",Operation:"",DiagnosisArr:[],OperationArr:[],hj:[],CT:[],DiseaseDesc:"",orderInfo:this.$store.state.pInfo,user:this.$store.state.userInfo,OperationTime:""}},created:function(){this.pull()},methods:{pull:function(){var e=this;this.$get("/PlatFormAPI/Category/QueryItemByEnum",{categoryEnum:25}).then(function(n){e.OperationArr=n}),this.$get("/PlatFormAPI/DiseaseGroupAndRule/QueryDiseaseGroupForMedical").then(function(n){e.DiagnosisArr=n})},getImg:function(e){this.nowTarget=e},toPreview:function(e,n){var t={position:n,url:e};this.$bridge.callhandler("Preview",r()(t))},update:function(e){var n=this,t=e.target.files[0];t&&this.nowTarget&&(d()(t).then(function(e){var a=new FileReader;a.readAsDataURL(t);var i=n;a.onload=function(e){i.er=this.result.split("base64,")[1],i.$post("PlatFormAPI/PatientArchives/ReportImageUpload",{Base64Str:this.result.split("base64,")[1]}).then(function(e){i[i.nowTarget].push(e)})}}),e.target.value=null)},pop:function(e,n){this[e].splice(n,1)},send:function(){var e=this;if(this.Operation&&0!==this.Operation.CategoryItemValue&&!this.OperationTime)return this.$toast("请选择手术时间");var n=[];this.hj.forEach(function(e){n.push({ImagePaths:e.SavePath,ImageType:3,PictureLabel:"喉镜"})}),this.CT.forEach(function(e){n.push({ImagePaths:e.SavePath,ImageType:3,PictureLabel:"CT、MR、DR"})});var t=[{DisGroupId:this.Diagnosis.DisGroupId,DisGroupName:this.Diagnosis.DisGroupName}];this.$post("PlatFormAPI/PatientArchives/ReportImagSave",{DiseaseDesc:this.DiseaseDesc,Diagnosis:this.Diagnosis.DisGroupName,OperationName:this.Operation.CategoryItemName,OperationType:this.Operation.CategoryItemValue,MedicalTempId:2,PatientId:this.orderInfo.PatientInfo.PatientId,PatientName:this.orderInfo.PatientInfo.PatientName,UserType:2,CreateId:this.user.Data.User.DoctorId,CreateName:this.user.Data.User.DoctorName,OperationTime:this.OperationTime,ImgDetails:n,DisGroupList:t}).then(function(n){e.$toast("上传成功"),e.$router.back()})}}}),c=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"container pdt"},[t("div",{staticClass:"title"},[t("back"),e._v(" "),t("span",{staticClass:"name"},[e._v("上传病历")]),e._v(" "),t("a")],1),e._v(" "),t("p",{staticClass:"patient"},[t("span",{staticClass:"gray"},[e._v("就诊人")]),e._v(" "),t("span",{staticClass:"choose"},[e._v(e._s(this.$store.state.patient.PatientName))])]),e._v(" "),t("p",{staticClass:"patient2"},[t("span",{staticClass:"gray"},[e._v("疾病")]),e._v(" "),t("span",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.Diagnosis,expression:"Diagnosis"}],class:{plhd:!e.Diagnosis},attrs:{dir:"rtl"},on:{change:function(n){var t=Array.prototype.filter.call(n.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.Diagnosis=n.target.multiple?t:t[0]}}},[t("option",{staticStyle:{display:"none"},attrs:{value:"",disabled:"",selected:""}},[e._v("\n                        请选择疾病\n                    ")]),e._v(" "),e._l(e.DiagnosisArr,function(n,a){return t("option",{key:a,domProps:{value:n}},[e._v("\n                        "+e._s(n.DisGroupName)+"\n                    ")])})],2),e._v(" "),t("i")])]),e._v(" "),t("p",{staticClass:"patient2"},[t("span",{staticClass:"gray"},[e._v("手术")]),e._v(" "),t("span",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.Operation,expression:"Operation"}],class:{plhd:!e.Operation},attrs:{dir:"rtl"},on:{change:function(n){var t=Array.prototype.filter.call(n.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.Operation=n.target.multiple?t:t[0]}}},[t("option",{staticStyle:{display:"none"},attrs:{value:"",disabled:"",selected:""}},[e._v("\n                        请选择\n                    ")]),e._v(" "),e._l(e.OperationArr,function(n,a){return t("option",{key:a,domProps:{value:n}},[e._v("\n                        "+e._s(n.CategoryItemName)+"\n                    ")])})],2),e._v(" "),t("i")])]),e._v(" "),e.Operation&&0!==e.Operation.CategoryItemValue?t("p",{staticClass:"patient2"},[t("span",{staticClass:"gray"},[e._v("手术时间")]),e._v(" "),t("span",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.OperationTime,expression:"OperationTime"}],attrs:{type:"date"},domProps:{value:e.OperationTime},on:{input:function(n){n.target.composing||(e.OperationTime=n.target.value)}}}),e._v(" "),t("i")])]):e._e(),e._v(" "),t("div",{staticClass:"describe"},[t("p",{staticClass:"gray"},[e._v("病情描述")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.DiseaseDesc,expression:"DiseaseDesc"}],attrs:{placeholder:"详细描述您的病情症状，曾经做过的检查、用药情况等，想要获得医生的什么帮助"},domProps:{value:e.DiseaseDesc},on:{input:function(n){n.target.composing||(e.DiseaseDesc=n.target.value)}}})]),e._v(" "),t("div",{staticClass:"update"},[t("p",{staticClass:"tit gray"},[e._v("病情照片")]),e._v(" "),t("div",{staticClass:"Image"},[t("p",[e._v("检验检查报告（喉镜）")]),e._v(" "),t("div",{staticClass:"add"},[e._l(e.hj,function(n,a){return t("p",{key:a},[t("img",{attrs:{src:n.DisplayPath.replace(n.DisplayPath.split("/")[n.DisplayPath.split("/").length-1],"Thumbnail/"+n.DisplayPath.split("/")[n.DisplayPath.split("/").length-1])},on:{click:function(n){e.toPreview(e.hj,a)}}}),e._v(" "),t("i",{staticClass:"pop",on:{click:function(n){e.pop("hj",a)}}})])}),e._v(" "),e.hj.length<9?t("label",{staticClass:"icon",attrs:{for:"file"},on:{click:function(n){e.getImg("hj")}}}):e._e()],2)]),e._v(" "),t("div",{staticClass:"Image"},[t("p",[e._v("检验检查报告（CT、MR、DR）")]),e._v(" "),t("div",{staticClass:"add"},[e._l(e.CT,function(n,a){return t("p",{key:a},[t("img",{attrs:{src:n.DisplayPath.replace(n.DisplayPath.split("/")[n.DisplayPath.split("/").length-1],"Thumbnail/"+n.DisplayPath.split("/")[n.DisplayPath.split("/").length-1])},on:{click:function(n){e.toPreview(e.CT,a)}}}),e._v(" "),t("i",{staticClass:"pop",on:{click:function(n){e.pop("CT",a)}}})])}),e._v(" "),e.CT.length<9?t("label",{staticClass:"icon",attrs:{for:"file"},on:{click:function(n){e.getImg("CT")}}}):e._e()],2)])]),e._v(" "),t("div",{staticClass:"footer"},[t("button",{attrs:{disabled:!(e.hj.length||e.CT.length)},on:{click:e.send}},[e._v("上传病历")])]),e._v(" "),t("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:"file",type:"file",accept:"image/*;capture=camera",multipl:""},on:{change:e.update}})])},p=[],m={render:c,staticRenderFns:p},f=m,g=t("VU/8"),u=a,v=g(l,f,!1,u,"data-v-34f72358",null);n.default=v.exports},kTaM:function(e,n,t){var a=t("z/we");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("59e5f2f8",a,!0,{})},"z/we":function(e,n,t){var a=t("kxFB");n=e.exports=t("FZ+f")(!1),n.push([e.i,"\n.container[data-v-34f72358] {\n  font-size: 15px;\n  padding-bottom: 2.66667rem;\n}\n.pb[data-v-34f72358] {\n  padding-bottom: 2.66667rem;\n}\n.btn[data-v-34f72358] {\n  width: 80%;\n  height: 1.06667rem;\n  text-align: center;\n  line-height: 1.06667rem;\n  border-radius: 30px;\n  background: #306bce;\n  color: #fff;\n  margin: 0.93333rem auto 0;\n}\nbutton[data-v-34f72358] {\n  background: #306bce;\n  color: #fff;\n  height: 1.06667rem;\n  width: 80%;\n  display: block;\n  margin: 1.06667rem auto;\n  border-radius: 30px;\n}\n.choose[data-v-34f72358] {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n}\n.choose i[data-v-34f72358] {\n    display: block;\n    height: 0.46667rem;\n    width: 0.26667rem;\n    background: url("+a(t("b9hs"))+") no-repeat center;\n    background-size: cover;\n    margin-left: 0.13333rem;\n}\n.patient[data-v-34f72358], .patient2[data-v-34f72358] {\n  margin-top: 0.13333rem;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  height: 1.2rem;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n  padding: 0 0.4rem;\n  background: #fff;\n  margin-bottom: 0.13333rem;\n  -webkit-box-pack: justify;\n  -webkit-justify-content: space-between;\n          justify-content: space-between;\n}\n.patient2[data-v-34f72358] {\n  margin-top: 0;\n  font-size: 14px;\n}\n.patient2 input[data-v-34f72358] {\n    width: 50%;\n    height: 100%;\n    text-align: right;\n}\n.patient2 select[data-v-34f72358] {\n    background: transparent;\n    border-color: transparent;\n    -webkit-box-flex: 1;\n    -webkit-flex: 1;\n            flex: 1;\n    height: 100%;\n    direction: rtl;\n    width: 100%;\n}\n.patient2 span[data-v-34f72358] {\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n            align-items: center;\n}\n.patient2 span[data-v-34f72358]:last-child {\n      -webkit-box-flex: 1;\n      -webkit-flex: 1;\n              flex: 1;\n      height: 100%;\n      -webkit-box-pack: end;\n      -webkit-justify-content: flex-end;\n              justify-content: flex-end;\n}\n.patient2 .plhd[data-v-34f72358] {\n    color: #A9A9A9;\n}\n.patient2 i[data-v-34f72358] {\n    display: block;\n    height: 0.46667rem;\n    width: 0.26667rem;\n    background: url("+a(t("b9hs"))+") no-repeat center;\n    background-size: cover;\n}\n.item[data-v-34f72358] {\n  padding: 0.2rem 0.4rem 0 0.4rem;\n}\n.item .date[data-v-34f72358] {\n    padding: 0.13333rem 0;\n    font-size: 13px;\n    margin-bottom: 0.13333rem;\n    color: #666;\n    text-align: center;\n}\n.item .card[data-v-34f72358] {\n    padding: 0.26667rem 0.53333rem;\n    border-radius: 20px;\n}\n.item .card p[data-v-34f72358] {\n      display: -webkit-box;\n      display: -webkit-flex;\n      display: flex;\n      -webkit-box-pack: justify;\n      -webkit-justify-content: space-between;\n              justify-content: space-between;\n}\n.item .card p[data-v-34f72358]:first-child {\n        margin-bottom: 0.26667rem;\n        border-bottom: 1px solid #ececec;\n        padding-bottom: 0.26667rem;\n}\n.item .card .text[data-v-34f72358] {\n      -webkit-box-orient: vertical;\n      -webkit-box-direction: normal;\n      -webkit-flex-direction: column;\n              flex-direction: column;\n      line-height: 2;\n}\n.item .card .text .gray[data-v-34f72358] {\n        color: #999;\n}\n.item .card .from[data-v-34f72358] {\n      border: 1px solid #fea514;\n      color: #fea514;\n      padding: 0.04rem 0.26667rem;\n      font-size: 13px;\n      border-radius: 20px;\n}\n.describe[data-v-34f72358] {\n  background: #fff;\n  padding-bottom: 0.26667rem;\n}\n.describe p[data-v-34f72358] {\n    padding: 0.26667rem 0.4rem;\n    border-bottom: 1px solid #ececec;\n}\n.describe textarea[data-v-34f72358] {\n    display: block;\n    width: 90%;\n    height: 2rem;\n    margin: 0.26667rem auto;\n    border-radius: 5px;\n    resize: none;\n    padding: 0.2rem;\n}\n.pt[data-v-34f72358] {\n  padding: 0.26667rem 0.4rem 0.13333rem;\n}\n.update[data-v-34f72358] {\n  background: #fff;\n  margin-top: 0.13333rem;\n}\n.update .tit[data-v-34f72358] {\n    padding: 0.26667rem 0.4rem;\n    border-bottom: 1px solid #ececec;\n}\n.card[data-v-34f72358] {\n  padding: 0.4rem;\n  background: #fff;\n}\n.gray[data-v-34f72358] {\n  color: #666;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n}\n.gray i[data-v-34f72358] {\n    display: block;\n    width: 0.4rem;\n    height: 0.4rem;\n    margin-right: 0.13333rem;\n}\n.gray .icon10[data-v-34f72358] {\n    background: url("+a(t("+Y4L"))+") no-repeat center;\n    background-size: contain;\n}\n.gray .icon11[data-v-34f72358] {\n    background: url("+a(t("YFD/"))+") no-repeat center;\n    background-size: contain;\n}\n.gray .icon12[data-v-34f72358] {\n    background: url("+a(t("rg5S"))+") no-repeat center;\n    background-size: contain;\n}\n.Image[data-v-34f72358] {\n  background: #fff;\n  margin-top: 0.13333rem;\n  padding: 0.13333rem 0.4rem;\n  border-bottom: 1px solid #ececec;\n}\n.Image .name[data-v-34f72358] {\n    padding: 0 0.26667rem;\n    font-size: 13px;\n}\n.Image .add[data-v-34f72358] {\n    padding-top: 0.13333rem;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-flex-wrap: wrap;\n            flex-wrap: wrap;\n}\n.Image .add img[data-v-34f72358] {\n      width: 2.4rem;\n      height: 2.4rem;\n      margin: 0.2rem;\n}\n.Image .add p[data-v-34f72358] {\n      position: relative;\n}\n.Image .add .pop[data-v-34f72358] {\n      display: block;\n      width: 0.66667rem;\n      height: 0.66667rem;\n      background: url("+a(t("9bmq"))+") no-repeat center;\n      background-size: contain;\n      background-color: #fff;\n      position: absolute;\n      top: -0.06667rem;\n      right: 0;\n      border-radius: 50%;\n}\n.Image .add .icon[data-v-34f72358] {\n      display: block;\n      width: 2.4rem;\n      height: 2.4rem;\n      border: 1px solid #ccc;\n      border-radius: 20px;\n      position: relative;\n      margin: 0.13333rem 0.2rem;\n}\n.Image .add .icon[data-v-34f72358]::before {\n        content: '';\n        display: block;\n        width: 50%;\n        height: 0.2rem;\n        border-radius: 0.13333rem;\n        background: #ccc;\n        position: absolute;\n        top: 1.06667rem;\n        left: 25%;\n}\n.Image .add .icon[data-v-34f72358]::after {\n        content: '';\n        display: block;\n        width: 0.2rem;\n        border-radius: 0.13333rem;\n        height: 50%;\n        background: #ccc;\n        position: absolute;\n        top: 25%;\n        left: 1.10667rem;\n}\n.footer[data-v-34f72358] {\n  position: fixed;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  padding: 0.4rem 0;\n  background: #fff;\n}\n.footer > .btn[data-v-34f72358] {\n    width: 80%;\n    height: 1.06667rem;\n    text-align: center;\n    line-height: 1.06667rem;\n    border-radius: 0.53333rem;\n    background: #306bce;\n    color: #fff;\n    margin: 0 auto;\n}\n.footer > button[data-v-34f72358] {\n    margin: 0 auto;\n}\n",""])}});