webpackJsonp([117],{URh5:function(t,e,a){"use strict";function n(t){a("gM8X")}Object.defineProperty(e,"__esModule",{value:!0});var r=a("pKZN"),o=a("8pLc"),i=a("63CM"),s=(r.a,o.a,i.a,{components:{back:r.a,noData:o.a},data:function(){return{title:"选择转诊医生",user:this.$store.state.userInfo.Data,haveMore:!0,page:1,list:[],reason:[],pageShow:!1,showConfirm:!1,showPopup:!1,dateVal:"",referralRemark:"",defaultImg:'this.src="'+a("tyKI")+'"',dataApp:{},ToDrId:"",ToDrName:"",PatientName:this.$route.query.PatientName}},directives:{TransferDom:i.a},created:function(){this.pull(!1),this.deterDate()},mounted:function(){this.getMore()},beforeDestroy:function(){window.onscroll=null},methods:{deterDate:function(){this.showPopup=!1;var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,n=t.getDate();a>=1&&a<=9&&(a="0"+a),n>=0&&n<=9&&(n="0"+n),this.dateVal||(this.dateVal=e+"-"+a+"-"+n)},goReferral:function(t){this.showConfirm=!0,this.ToDrId=t.DrId,this.ToDrName=t.DrName},onConfirm:function(){var t=this;this.$post("PlatFormAPI/SpecialistHosGroup/SaveSpecialistReferral",{SpecialistHosGroupId:this.$route.query.SpecialistHosGroupId,HosGroupName:this.$route.query.HosGroupName,FromDrId:this.user.User.DoctorId,FromDrName:this.user.User.DoctorName,ToDrId:this.ToDrId,ToDrName:this.ToDrName,ReferralRemark:this.referralRemark,PatientId:this.$route.query.PatientId,PatientName:this.$route.query.PatientName}).then(function(e){t.$toast("转诊成功"),setTimeout(function(){t.$router.push("/teamList")},2e3),t.$bridge.callhandler("ZhuanZhenSuccess",!0)})},pull:function(t){var e=this;this.haveMore&&this.$post("PlatFormAPI/SpecialistHosGroup/QuerySpecialistHosGroupMemberPage",{SpecialistHosGroupId:this.$route.query.SpecialistHosGroupId,KeyName:"",IsHead:-1,IsSpecialReferral:1,PageIndex:this.page,PageSize:15}).then(function(a){e.pageShow=!0,!a.ReturnData||a.ReturnData.length<15?e.haveMore=!1:e.haveMore=!0,t?a.ReturnData.forEach(function(t){e.list.push(t)}):e.list=a.ReturnData})},getMore:function(){var t=this,e=this.$refs.el,a=null;window.onscroll=function(){clearTimeout(a),a=setTimeout(function(){var a=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop;e.scrollHeight-a-window.innerHeight<100&&t.haveMore&&(t.page+=1,t.pull(!0))},100)}}}}),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"el",staticClass:"pdt"},[n("div",{staticClass:"title"},[n("back"),t._v(" "),n("span",{staticClass:"name"},[t._v(t._s(t.title))]),t._v(" "),n("a")],1),t._v(" "),!t.list.length&&t.pageShow?n("no-data",{attrs:{txt:"暂无任何转诊医生信息"}}):t._e(),t._v(" "),t.list?n("div",{staticClass:"teamList"},t._l(t.list,function(e,r){return n("div",{key:r,staticClass:"tab"},[n("div",{staticClass:"tab-main"},[n("div",{staticClass:"tab-l"},[e.PicturePath?n("img",{attrs:{onerror:t.defaultImg,src:e.PicturePath}}):n("img",{attrs:{src:a("uLfx")}})]),t._v(" "),n("div",{staticClass:"tab-r"},[n("div",[n("span",[t._v(t._s(e.DrName)),n("em",[t._v(t._s(e.PositionName))])]),t._v(" "),n("b",[t._v(t._s(e.SpecialReferralAmount)+"元")])]),t._v(" "),n("p",{staticClass:"tab-title"},[n("span",[t._v(t._s(e.HospitalName))]),t._v(" "),n("span",[t._v(t._s(e.DepartmentName))])]),t._v(" "),n("p",[t._v("擅长："+t._s(e.DoctorSkill))])])]),t._v(" "),n("i",{on:{click:function(a){t.goReferral(e)}}},[t._v("推荐转诊")])])})):t._e(),t._v(" "),n("confirm",{attrs:{"confirm-text":"确定",title:"发起转诊"},on:{"on-cancel":function(e){t.showConfirm=!1},"on-confirm":t.onConfirm},model:{value:t.showConfirm,callback:function(e){t.showConfirm=e},expression:"showConfirm"}},[n("div",{staticClass:"chooseDr"},[n("p",[t._v("就诊人："),n("i",[t._v(t._s(t.PatientName))])]),t._v(" "),n("p",[t._v("接诊医生："),n("i",[t._v(t._s(t.ToDrName))])]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.referralRemark,expression:"referralRemark"}],attrs:{placeholder:"请填写转诊说明"},domProps:{value:t.referralRemark},on:{input:function(e){e.target.composing||(t.referralRemark=e.target.value)}}})])])],1)},d=[],c={render:l,staticRenderFns:d},m=c,p=a("VU/8"),u=n,f=p(s,m,!1,u,"data-v-51d4c661",null);e.default=f.exports},gM8X:function(t,e,a){var n=a("jbd2");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("661dfaeb",n,!0,{})},jbd2:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"\n.chooseDr[data-v-51d4c661] {\n  padding: 0.33333rem 0;\n}\n.chooseDr textarea[data-v-51d4c661], .chooseDr input[data-v-51d4c661] {\n    resize: none;\n    height: 4rem;\n    font-size: 0.37333rem;\n    color: #333;\n    padding: 0.13333rem 0.26667rem;\n    width: 100%;\n    border: 1px solid #eee;\n}\n.chooseDr input[data-v-51d4c661] {\n    height: auto;\n    padding: 0.26667rem;\n}\n.chooseDr p[data-v-51d4c661] {\n    padding-bottom: 0.2rem;\n    text-align: left;\n}\n.chooseDr p i[data-v-51d4c661] {\n      font-style: normal;\n      color: #333;\n}\n.teamList[data-v-51d4c661] {\n  margin-top: 0.13333rem;\n}\n.teamList .tab[data-v-51d4c661] {\n    background-color: #fff;\n    margin-bottom: 0.13333rem;\n    padding-bottom: 0.26667rem;\n}\n.teamList .tab .tab-main[data-v-51d4c661] {\n      display: -webkit-box;\n      display: -webkit-flex;\n      display: flex;\n      -webkit-box-pack: justify;\n      -webkit-justify-content: space-between;\n              justify-content: space-between;\n      border-bottom: 1px #eee solid;\n      padding: 0.26667rem 0.4rem;\n}\n.teamList .tab i[data-v-51d4c661] {\n      display: block;\n      width: 40%;\n      text-align: center;\n      line-height: 0.8rem;\n      border: 1px #2e69cd solid;\n      border-radius: 0.4rem;\n      color: #2e69cd;\n      font-style: normal;\n      margin: 0.26667rem 30% 0 30%;\n      font-size: 13px;\n}\n.teamList .tab .tab-l img[data-v-51d4c661] {\n      display: block;\n      width: 1.2rem;\n      height: 1.2rem;\n      border-radius: 50%;\n}\n.teamList .tab .tab-l span[data-v-51d4c661] {\n      display: block;\n      font-size: 12px;\n      text-align: center;\n      padding: 0.06667rem;\n      background-color: #ffa612;\n      border-radius: 0.13333rem;\n      color: #fff;\n      font-style: normal;\n      margin-top: 0.06667rem;\n}\n.teamList .tab .tab-r[data-v-51d4c661] {\n      width: 78%;\n      font-size: 12px;\n}\n.teamList .tab .tab-r div[data-v-51d4c661] {\n        display: -webkit-box;\n        display: -webkit-flex;\n        display: flex;\n        -webkit-box-pack: justify;\n        -webkit-justify-content: space-between;\n                justify-content: space-between;\n        font-size: 15px;\n        font-weight: normal;\n}\n.teamList .tab .tab-r div em[data-v-51d4c661] {\n          font-size: 12px;\n          color: #999999;\n          font-style: normal;\n          display: inline-block;\n          margin-left: 0.4rem;\n}\n.teamList .tab .tab-r div b[data-v-51d4c661] {\n          display: inline-block;\n          color: red;\n          font-weight: normal;\n}\n.teamList .tab .tab-r p[data-v-51d4c661] {\n        padding: 0.13333rem 0;\n        color: #999999;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        width: 100%;\n        overflow: hidden;\n}\n.teamList .tab .tab-r .tab-title span[data-v-51d4c661] {\n        margin-right: 0.4rem;\n        font-size: 14px;\n}\n",""])}});