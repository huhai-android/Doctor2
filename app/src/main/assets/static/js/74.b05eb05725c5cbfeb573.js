webpackJsonp([74],{AgYI:function(t,a,e){"use strict";function n(t){e("R8Wn")}Object.defineProperty(a,"__esModule",{value:!0});var i=e("mvHQ"),r=e.n(i),s=e("pKZN"),o=e("wsTN"),d=(o.default,s.a,{data:function(){return{title:"",empgasisNumber:0,placeholder:"请输入患者相关信息",arr:[],page:1,size:10,search:"",listStart:!0,start404:!1,start1:!0,start2:!0,start3:!0,haveMore:!0,PatientName:"",show:!1,Total:"",DrId:null==this.$store.state.userInfo?2:this.$store.state.userInfo.Data.User.DoctorId,operation:!1,operationText:"编辑",showConfirm:!1,pPatientId:"",name:"",MFItemId:""}},components:{searchCustom:o.default,back:s.a},methods:{constraintLength:function(t){return t.substring(0,4)},operationList:function(){this.operation?this.operation=!1:(this.operation=!0,this.operationText="")},delPatient:function(t){this.showConfirm=!0,this.pPatientId=t.PatientId,this.name=t.PatientName,console.log(t)},confirm:function(){var t=this,a=this.$store.state.grouapsArr;this.$post("PlatFormAPI/Memberfeatures/DelPatientFeatureRecord",{PatientId:this.pPatientId,DrId:a.DrId,MFItemId:a.MFItemId}).then(function(a){t.page=1,t.haveMore=!0,t.httpStart(t.$route.params.start)})},getIndex:function(t,a,e,n){var i=this,r={};1==a||"1"==a?(r.url="/PlatFormAPI/DoctorPatient/SetRelation",r.parameter={DrPatientId:t,RelationStatus:1}):(r.url="/PlatFormAPI/DoctorPatient/RefuseRelation",r.parameter={DrPatientId:t}),this.$get(r.url,r.parameter).then(function(t){1==t&&(1==a||"1"==a?i.toIM(e,n):(i.show=!0,i.$bridge.callhandler("rejectPatient"),i.httpStart(i.$route.params.start)))})},patientSex:function(t){switch(t){case 1:return"男";case 2:return"女";case 3:return"未知"}},searchFor:function(){this.page=1,this.haveMore=!0,this.httpStart(this.$route.params.start)},httpStart:function(t,a){var e=this;if(this.haveMore){var n={};if(1==t)this.start1=!0,this.start2=!1,this.start3=!1,this.title="新报道患者",n.url="/PlatFormAPI/DoctorPatient/QueryDoctorPatientPage",n.parameter={DrId:this.DrId,DrName:"",PatientId:-1,PatientName:this.search,RelationStatus:-1,IsDrKey:-1,IsPatientMain:-1,SortField:"UpdateTime",SortDirection:!1,PageIndex:this.page,PageSize:this.size};else if(2==t)this.start1=!1,this.start2=!0,this.start3=!1,this.title="重点关注",n.url="/PlatFormAPI/DoctorPatient/QueryDoctorPatientPage",n.parameter={DrId:this.DrId,DrName:"",PatientId:-1,PatientName:this.search,RelationStatus:-1,IsDrKey:1,IsPatientMain:-1,PageIndex:this.page,PageSize:this.size};else if(3==t){this.start1=!1,this.start2=!1,this.start3=!0;var i=this.$store.state.grouapsArr;this.MFItemId=i.MFItemId,void 0!=i.MFItemName?this.title=i.MFItemName:this.title="",n.url="/PlatFormAPI/Memberfeatures/QueryDrFeaturesPatientForPage",n.parameter={DrId:i.DrId,MFItemId:i.MFItemId,PatientName:this.search,PageIndex:this.page,PageSize:this.size}}this.$post(n.url,n.parameter).then(function(t){if(""==t.ReturnData||t.ReturnData==[]||void 0==t.ReturnData){if(void 0!=a)return;e.start404=!0}else e.start404=!1;e.empgasisNumber=t.Total,e.Total=t.Total,!t.ReturnData||t.ReturnData.length<10?e.haveMore=!1:e.haveMore=!0,a?t.ReturnData.forEach(function(t){e.arr.push(t)}):e.arr=t.ReturnData})}},toIM:function(t){var a=this;this.$post("IMAPI/Message/GetNullIMRelationRecord",{DoctorId:this.DrId,PatientId:t.PatientId}).then(function(e){e.Total=a.Total,e.PatientInfo={PatientId:t.PatientId,PatientName:t.PatientName,PatientSex:t.PatientSex,Birthday:t.Birthday,Age:t.Age},e.DoctorPatientRelation={DrPatientId:t.DrPatientId},a.$bridge.callhandler("acceptPatient"),a.$bridge.callhandler("SendMessage",r()(e))})},toArc:function(t){this.$store.dispatch("pushpInfo",{PatientInfo:{PatientId:t.PatientId,PatientName:t.PatientName,PatientSex:t.PatientSex,Birthday:t.Birthday,Age:t.Age},DoctorPatientRelation:{DrPatientId:t.DrPatientId}}),this.$store.dispatch("pushpatient",{PatientId:t.PatientId,PatientName:t.PatientName,PatientSex:t.PatientSex,Birthday:t.Birthday,Age:t.Age}),this.$router.push("/archives")},getMore:function(){var t=this,a=this.$refs.el,e=null;window.onscroll=function(){clearTimeout(e),e=setTimeout(function(){var e=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop;a.scrollHeight-e-window.innerHeight<100&&t.haveMore&&t.Total>t.size&&(t.page+=1,t.httpStart(t.$route.params.start,!0))},100)}}},mounted:function(){var t=this;t.getMore(),t.$bridge.registerhandler("em",function(a,e){t.httpStart(t.$route.params.start),e("接收到数据")})},beforeDestroy:function(){window.onscroll=null},created:function(){this.httpStart(this.$route.params.start)}}),l=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("main",{ref:"el",staticClass:"main pdt",attrs:{id:"empgasis"}},[n("div",{staticClass:"title"},[n("back"),t._v(" "),n("span",{staticClass:"name"},[t._v(t._s(t.title)),1!=t.$route.params.start?n("span",[t._v("("+t._s(t.empgasisNumber)+")")]):t._e()]),t._v(" "),3==t.$route.params.start&&0!=t.MFItemId&&0!=t.empgasisNumber?n("span",{staticClass:"save",on:{click:function(a){t.operationList()}}},[t._v(t._s(t.operationText))]):n("a")],1),t._v(" "),n("div",{staticClass:"searchBox"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"search",attrs:{type:"text"},domProps:{value:t.search},on:{keyup:function(a){return"button"in a||!t._k(a.keyCode,"enter",13,a.key,"Enter")?t.searchFor(a):null},input:function(a){a.target.composing||(t.search=a.target.value)}}}),t._v(" "),n("span",{staticClass:"sBtn",on:{click:t.searchFor}},[t._v("搜索")])]),t._v(" "),t.listStart?n("div",{staticClass:"empgasis-grid"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.start1,expression:"start1"}],staticClass:"start1",attrs:{"data-start":"1"}},t._l(t.arr,function(a,i){return n("div",{key:i,staticClass:"item",on:{click:function(e){t.toIM(a)}}},[a.PaPicturePath?n("img",{attrs:{src:a.PaPicturePath}}):n("img",{attrs:{src:e("uLfx")}}),t._v(" "),n("div",[n("span",{staticClass:"name"},[n("span",[t._v(t._s(t.constraintLength(a.PatientName||"未设置")))])]),t._v(" "),n("p",{staticClass:"symptom"},[n("span",[t._v(t._s(t.patientSex(a.PatientSex))+"  "+t._s(a.Age||""))]),t._v(" "),n("span",[t._v(t._s(a.UpdateTime||""))])])])])})),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.start2,expression:"start2"}],staticClass:"start2",attrs:{"data-start":"2"}},t._l(t.arr,function(a){return n("div",{staticClass:"item",on:{click:function(e){t.toArc(a)}}},[a.PaPicturePath?n("img",{attrs:{src:a.PaPicturePath}}):n("img",{attrs:{src:e("uLfx")}}),t._v(" "),n("div",[n("p",{staticClass:"atten"},[n("span",{staticClass:"name"},[t._v(t._s(a.PatientName))]),t._v(" "),n("span",{staticClass:"sex"},[t._v(t._s(t.patientSex(a.PatientSex))+" | "+t._s(a.Age||""))])]),t._v(" "),n("span",{staticClass:"symptom"},[t._v(t._s(a.Disease||"暂无疾病标签"))])])])})),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.start3,expression:"start3"}],staticClass:"start3",attrs:{"data-start":"3"}},[t._l(t.arr,function(a){return n("div",{staticClass:"item",on:{click:function(e){t.toArc(a)}}},[a.PaPicturePath?n("img",{attrs:{src:a.PaPicturePath}}):n("img",{attrs:{src:e("uLfx")}}),t._v(" "),n("div",[n("p",{staticClass:"atten"},[n("span",{staticClass:"name"},[t._v(t._s(a.PatientName))]),t._v(" "),n("span",{staticClass:"sex"},[t._v(t._s(t.patientSex(a.PatientSex))+" | "+t._s(a.Age||""))])]),t._v(" "),n("span",{staticClass:"symptom"},[t._v(t._s(a.Disease||"暂无疾病标签"))])]),t._v(" "),t.operation?n("p",{staticClass:"delPatient",on:{click:function(e){e.stopPropagation(),t.delPatient(a)}}},[t._v("删除")]):t._e()])}),t._v(" "),0!=t.MFItemId?n("div",{staticClass:"addPatientName",on:{click:function(a){t.$router.push("/patient/addPatientName")}}},[t._v("添加新成员")]):t._e()],2)]):t._e(),t._v(" "),t.start404?n("div",{staticClass:"h404"},[t._v("\n\t\t\t暂无数据\n\t\t")]):t._e(),t._v(" "),n("toast",{attrs:{name:"show",time:1e3},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[t._v("操作成功")]),t._v(" "),n("confirm",{on:{"on-cancel":function(a){t.showConfirm=!1},"on-confirm":t.confirm},model:{value:t.showConfirm,callback:function(a){t.showConfirm=a},expression:"showConfirm"}},[t._v("确定从“"+t._s(t.title)+"”组删除 "+t._s(t.name)+" 吗？\n")])],1)},c=[],m={render:l,staticRenderFns:c},p=m,h=e("VU/8"),u=n,g=h(d,p,!1,u,"data-v-a8a32516",null);a.default=g.exports},GRzO:function(t,a,e){a=t.exports=e("FZ+f")(!1),a.push([t.i,'\n@charset "UTF-8";\n.vux-patient-header[data-v-a8a32516] {\n  position: relative;\n  box-sizing: border-box;\n  background-color: #fff;\n}\n.vux-patient-header-back[data-v-a8a32516] {\n  color: #3069cf;\n}\n.vux-patient-header .vux-patient-header-left[data-v-a8a32516], .vux-patient-header .vux-patient-header-right[data-v-a8a32516] {\n  position: absolute;\n  top: 0.38667rem;\n  display: block;\n  font-size: 16px;\n  line-height: 1;\n  color: #666;\n}\n.vux-patient-header .vux-patient-header-left[data-v-a8a32516] {\n  left: 0.53333rem;\n}\n.vux-patient-header-title-area[data-v-a8a32516], .vux-patient-header .vux-patient-header-title[data-v-a8a32516] {\n  margin: 0 0.53333rem;\n  height: 1.17333rem;\n  width: auto;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.vux-patient-header .vux-patient-header-title[data-v-a8a32516] {\n  line-height: 1.17333rem;\n  text-align: center;\n  font-size: 15px;\n  font-weight: 400;\n  color: #333;\n}\n.vux-patient-header .vux-patient-header-right[data-v-a8a32516] {\n  right: 0.53333rem;\n}\n.vux-flexbox[data-v-a8a32516] {\n  padding: 0 0.53333rem;\n  background-color: #fff;\n}\n.flex-demo[data-v-a8a32516] {\n  text-align: center;\n}\n.vux-flexbox-item[data-v-a8a32516] {\n  border-top: 1px solid #f4f4f4;\n  padding-top: 0.53333rem;\n  padding-bottom: 0.33333rem;\n  font-size: 14px;\n}\n#patient .vux-search-box[data-v-a8a32516] {\n  padding: 0.32rem 0 !important;\n}\n/*搜索更改*/\n.clearfix[data-v-a8a32516]:before,\n.clearfix[data-v-a8a32516]:after {\n  content: " ";\n  display: table;\n}\n.clearfix[data-v-a8a32516]:after {\n  clear: both;\n}\n/**\r\n * For IE 6/7 only\r\n */\n.clearfix[data-v-a8a32516] {\n  *zoom: 1;\n}\n#app .searchCustomPadding[data-v-a8a32516] {\n  padding-top: 1.2rem;\n}\n.h404[data-v-a8a32516] {\n  padding: 0.26667rem;\n  text-align: center;\n  background-color: #fff;\n}\n.empgasis-grid[data-v-a8a32516] {\n  margin-top: 0.26667rem;\n  background-color: #fff;\n  padding: 0 0 0 0.53333rem;\n}\n.empgasis-grid .item[data-v-a8a32516] {\n    padding-bottom: 0.4rem;\n    padding-right: 0.53333rem;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    position: relative;\n    padding-top: 0.4rem;\n    border-bottom: 1px solid #f4f4f4;\n}\n.empgasis-grid .item div[data-v-a8a32516] {\n      width: 100%;\n}\n.empgasis-grid .item span[data-v-a8a32516] {\n      display: block;\n}\n.empgasis-grid .item img[data-v-a8a32516] {\n      min-width: 1.06667rem;\n      min-height: 1.06667rem;\n      max-width: 1.06667rem;\n      max-height: 1.06667rem;\n      border-radius: 50%;\n      margin-right: 0.4rem;\n}\n.empgasis-grid .item .name[data-v-a8a32516] {\n      font-size: 15px;\n      margin-bottom: 0.10667rem;\n      color: #333;\n      display: -webkit-box;\n      display: -webkit-flex;\n      display: flex;\n}\n.empgasis-grid .item .symptom[data-v-a8a32516] {\n      display: -webkit-box;\n      display: -webkit-flex;\n      display: flex;\n      width: 100%;\n      -webkit-box-pack: justify;\n      -webkit-justify-content: space-between;\n              justify-content: space-between;\n      font-size: 13px;\n      color: #999;\n}\n.empgasis-grid .item .sex[data-v-a8a32516] {\n      margin-left: 0.4rem;\n      font-size: 12px;\n      line-height: 1;\n      padding-top: 0.10667rem;\n}\n.empgasis-grid .item #sex[data-v-a8a32516] {\n      margin-left: 0.26667rem;\n      -webkit-box-flex: 1;\n      -webkit-flex: 1;\n              flex: 1;\n      text-align: right;\n}\n.empgasis-grid .item p[data-v-a8a32516] {\n      font-size: 13px;\n}\n.empgasis-grid .item .atten[data-v-a8a32516] {\n      margin-bottom: 0.26667rem;\n}\n.empgasis-grid .item .atten span[data-v-a8a32516] {\n        display: inline;\n}\n.empgasis-grid .item[data-v-a8a32516]:last-child {\n    margin-bottom: 0;\n    border-bottom: 0 solid;\n}\n.start1 .item[data-v-a8a32516]:last-child, .start2 .item[data-v-a8a32516]:last-child, .start3 .item[data-v-a8a32516]:last-child {\n  border-bottom: 0 solid;\n}\n.searchBox[data-v-a8a32516] {\n  height: 1.17333rem;\n  width: 100%;\n  background: #fff;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n          align-items: center;\n  padding: 0 0.4rem;\n}\n.searchBox input[data-v-a8a32516] {\n    width: 80%;\n    height: 0.8rem;\n    display: block;\n    margin: auto;\n    border: 1px solid #ccc;\n    border-radius: 20px;\n    padding: 0 0.4rem;\n}\n.searchBox .sBtn[data-v-a8a32516] {\n    min-width: 1.6rem;\n    height: 0.8rem;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n            align-items: center;\n    -webkit-box-pack: center;\n    -webkit-justify-content: center;\n            justify-content: center;\n    background: #306bce;\n    color: #fff;\n    border-radius: 10px;\n    margin-left: 0.26667rem;\n}\n#app .addBtn[data-v-a8a32516] {\n  position: absolute;\n  bottom: 0.44rem;\n  right: 2.02667rem;\n  width: 1.33333rem;\n  height: auto;\n  padding: 0.13333rem 0;\n  background-color: #3069cf;\n  color: #fff;\n  text-align: center;\n  border-radius: 0.10667rem;\n  font-size: 13px;\n  margin-top: 0;\n}\n#app .downBtn[data-v-a8a32516] {\n  position: absolute;\n  bottom: 0.44rem;\n  right: 0.53333rem;\n  width: 1.33333rem;\n  height: auto;\n  padding: 0.13333rem 0;\n  background-color: #ccc;\n  color: #fff;\n  text-align: center;\n  border-radius: 0.10667rem;\n  font-size: 13px;\n  margin-top: 0;\n}\n#app .Btn[data-v-a8a32516] {\n  position: absolute;\n  bottom: 0.44rem;\n  right: 0.53333rem;\n  width: 1.17333rem;\n  height: 0.53333rem;\n  line-height: 0.53333rem;\n  text-align: center;\n  border-radius: 0.10667rem;\n  font-size: 12px;\n  margin-top: 0;\n  color: #999;\n}\n.delPatient[data-v-a8a32516] {\n  width: 2.13333rem;\n  line-height: 0.6rem;\n  height: 0.6rem;\n  border: 1px #306bce solid;\n  text-align: center;\n  border-radius: 0.13333rem;\n  font-size: 14px;\n  color: #306bce;\n  margin-top: 0.4rem;\n}\n.addPatientName[data-v-a8a32516] {\n  position: fixed;\n  width: 30%;\n  line-height: 0.8rem;\n  left: 35%;\n  bottom: 0.26667rem;\n  background-color: #306bce;\n  color: #fff;\n  border-radius: 0.13333rem;\n  text-align: center;\n  font-size: 14px;\n  box-shadow: 3px 5px 5px #999;\n}\n',""])},R8Wn:function(t,a,e){var n=e("GRzO");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e("rjj0")("1169f7e4",n,!0,{})}});